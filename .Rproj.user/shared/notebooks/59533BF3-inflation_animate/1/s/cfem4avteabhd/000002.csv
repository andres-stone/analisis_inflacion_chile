"0","# Inflación variación anual 12 meses"
"0","pi <- read_excel(paste0(""datos/"",pi)) %>%"
"0","  janitor::clean_names()"
"2","New names:
* `` -> ...2
* `` -> ...3
* `` -> ...4
* `` -> ...5
* `` -> ...6
* ...
"
"0","pi <- pi[-c(1:3),]"
"0","# d: división, g: grupo, c: clase, sc: subclase, p: producto"
"0","colnames(pi) <- c(""ano"", ""mes"", ""d"", ""g"", ""c"", ""sc"", ""p"", ""glosa"","
"0","                  ""ponderacion"", ""indice"", ""var_mensual"", ""var_acumulada"","
"0","                  ""var_12_meses"", ""inc_mensual"", ""inc_acumulada"", ""inc_12_meses"")"
"0",""
"0","pi <- pi %>%"
"0","  mutate(ponderacion = as.numeric(ponderacion),"
"0","         indice      = as.numeric(indice),"
"0","         var_mensual = as.numeric(var_mensual),"
"0","         var_acumulada = as.numeric(var_acumulada),"
"0","         var_12_meses  = as.numeric(var_12_meses),"
"0","         inc_mensual   = as.numeric(inc_mensual),"
"0","         inc_acumulada = as.numeric(inc_acumulada),"
"0","         inc_12_meses  = as.numeric(inc_12_meses),"
"0","         Periodo = as.Date(paste0(ano,""-"", mes,""-"", ""1""), format = '%Y-%m-%d'))"
"0",""
"0","ipc <- pi %>% "
"0","  filter(glosa == 'IPC General')"
"0",""
"0","# Tasa de Politica Monetaria Mensual"
"0","tpm <- read_excel(paste0(""datos/"",tpm)) %>%"
"0","  janitor::clean_names()"
"2","New names:
* `` -> ...2
* `` -> ...3
* `` -> ...4
"
"0","tpm <- tpm[-1,c(1:2)]"
"0","colnames(tpm) <- c('Periodo', 'TPM')"
"0",""
"0","tpm <- tpm  %>%"
"0","  mutate(TPM     = round(as.numeric(TPM), 2),"
"0","         Periodo = as.Date(Periodo, format = '%Y-%m-%d'))"
"0",""
"0","# Uniendo bases desde el periodo que se encuentran y hasta donde llegan"
"0","ipc_tpm <- ipc %>% "
"0","  inner_join(tpm, by = c(""Periodo"")) %>%"
"0","  mutate(Y = as.numeric(ano),"
"0","         m = as.numeric(mes)) %>%"
"0","  select(-c(ano, mes)) %>%"
"0","  filter(Periodo > '2020-01-01')"
"0",""
"0","# Asignando show_time & reveal_time"
"0","ipc_tpm <- ipc_tpm  %>% "
"0","  mutate(show_time = ifelse((Y == 2020 & m %in% c(3:12)) "
"0","                            | Y == 2021, 15, 1),"
"0","         reveal_time = cumsum(show_time))"
"0",""
"0","# Reshape de base pi_tpm"
"0","ipc_tpm_long <- ipc_tpm %>%"
"0","  select(Periodo, var_12_meses, TPM, reveal_time) %>%"
"0","  melt(id.vars = c(""Periodo"", ""reveal_time""))"
"0",""
"0","#ipc_tpm_long$Periodo <- gsub('T00:00:00.0000000','', pi_tpm_long$Periodo)"
"0","#pi_tpm_long$Y       <- as.numeric(substr(pi_tpm_long$Periodo,1,4))"
"0","#pi_tpm_long$m       <- as.numeric(substr(pi_tpm_long$Periodo, 6,7))"
"0","#pi_tpm_long$Periodo <- as.Date(pi_tpm_long$Periodo, format = '%Y-%m-%d')"
"0",""
"0","# Datos"
"0","l_pi_tpm <- ipc_tpm %>%"
"0","  filter(Y == yy & m == mm2)"
"0","l_pi  <- l_pi_tpm$var_12_meses"
"0","l_tpm <- l_pi_tpm$TPM"
"0","l_ipc_m <- l_pi_tpm$var_mensual"
"0",""
"0","# Llave"
"0","ll_pi  <- ifelse(l_pi > 0, ""aumentó"", ""disminuyó"")"
"0",""
"0","# Valor absoluto para llave"
"0","abs_l_pi  <- abs(l_pi)"
"0","abs_l_tpm <- abs(l_tpm)"
